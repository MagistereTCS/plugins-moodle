define(["jquery","jqueryui"],function(a){function b(b,c,d){var e=!1,f="";a("#fitem_id_"+d+"_userfile").find(".filepicker-filename").bind("DOMNodeInserted",function(){if(1!=e){var g=a("#fitem_id_"+d+"_userfile").find(".filepicker-filename").find("a").attr("href");g&&f!=g&&(f=g,e=!0,a.ajax({type:"POST",url:c,data:{url:g,courseid:b},datatype:"json",success:function(c){var f=JSON.parse(c);"simple"==f.type?a(".panel-complex."+b).show():a(".panel-complex."+b).hide(),a("[name='type']").val(f.type),a("#"+d+"-workflow-csv-enrol-warning").empty(),""!=f.msg&&a("#"+d+"-workflow-csv-enrol-warning").append(f.msg),e=!1},error:function(a){console.log(a)}}))}})}return{init:function(a,c,d){b(a,c,d)}}});