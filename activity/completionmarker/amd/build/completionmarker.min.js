define(["jquery"],function(a){return{init:function(b,c){var d=a(".activity.completionmarker a.mark"),e=a(".activity.completionmarker form.togglecompletion"),f=e.attr("action"),g=function(a){var f=e.find("input[name='completionstate']");1==f.val()?(d.html(b),f.val(0)):(d.html(c),f.val(1)),location.reload(!0)},h=function(a){d.addClass("danger")};a(".activity.completionmarker a.mark").click(function(b){b.preventDefault(),a.ajax(f,{data:e.serialize(),success:g,error:h})})}}});